
### General configuration ####################################################
system.name   = avp64
system.desc   = Boots Linux on a single-core aarch64 CPU
system.config = ${cfg}

# Specify the number of processors to instantiate in the simulation.
system.nrcpu = 1

# Specify simulation duration. Simulation will stop automatically once this
# time-stamp is reached. Use integer values with suffixes s, ms, us or ns. If
# you want to simulate infinitely, leave this commented out.
#  system.duration = 2s

# TLM global quantum, a higher value improves performance but reduces timing
# accuracy. Use integer values with suffixes s, ms, us or ns.
system.quantum = 100us

# Clock frequency
system.clock.hz = 1000000000 # 1 GHz

### CPU configuration ########################################################
system.arm0.gdb_port      = 52100
system.arm0.gdb_wait      = 0 # (0) start core immediately; (1) wait for gdb

### Physical Address Map #####################################################
system.addr_uart       = 0x10009000..0x10009fff
system.addr_ram        = 0x00000000..0x0fffffff
system.addr_hwrng      = 0x10007000..0x10007fff
system.addr_simdev     = 0x10008000..0x10008fff
system.addr_ethoc      = 0x1000d000..0x1000efff
system.addr_sdhci      = 0x1000f000..0x1000ffff
system.addr_gic_distif = 0x10140000..0x10140fff
system.addr_gic_cpuif  = 0x10141000..0x10142fff
system.addr_gic_vifctrl= 0x10143000..0x10144fff
system.addr_gic_vcpuif = 0x10145000..0x10146fff
system.addr_spi        = 0x10147000..0x10148fff
system.addr_gpio       = 0x10149000..0x10149fff

### Interrupt Map ############################################################
system.irq_uart   = 5
system.irq_ethoc  = 9
system.irq_sdhci  = 10
system.irq_gt_hyp = 26
system.irq_gt_virt= 27
system.irq_gt_ns  = 30
system.irq_gt_s   = 29
system.irq_spi    = 11

### Memory and IO peripherals configuration ##################################

# Memory configuration
system.ram.size     = 0x10000000    # 256MB
system.ram.images   = ${dir}/../sw/arm64_tutorial/linux/boot.bin@0x00000000 \
                      ${dir}/../sw/arm64_tutorial/linux/Image-4.19.4@0x00080000 \
                      ${dir}/../sw/arm64_tutorial/linux/linux.dtb@0x07f00000

# SD Card configuration
system.sdcard.capacity = 0
system.sdcard.image    = ${dir}/../sw/arm64_tutorial/linux/sdcard.img

# Terminal configuration
system.term.backends      = term tcp:52010  # stdout|file|tap|null

# ETHOC configuration
system.ethoc.mac = 3a:44:1d:55:11:5a
system.bridge.backends = slirp:0
